<!DOCTYPE html>
<html lang="en" xmins:th="https://thymeLeaf.org">

<head th:insert="~{usuario/template_user.html::head}"> </head>

<body class="index-page">

	<div th:insert="~{usuario/template_user.html::header}" th:if="${sesion == null}"></div>
	<div th:insert="~{usuario/template_user.html::usuarioCabecera}" th:unless="${sesion == null}"></div>

	<main class="main">
		<!-- Page Title -->
		<div class="page-title light-background">
			<div class="container">
				<h1>Productos</h1>
				<nav class="breadcrumbs">
					<ol>
						<li><a th:href="@{/}">Inicio</a></li>
						<li class="current">Productos</li>
					</ol>
				</nav>
			</div>
			<section>
				<div class="container" th:insert="~{usuario/template_user.html::search}"></div>
			</section>
		</div><!-- End Page Title -->
		<div class="container py-5">
			<div class="row g-4 justify-content-center">
				<!-- Product Cards -->
				<div class="col-xl-3 col-lg-4 col-md-6 mb-4" th:each="producto: ${productos}">
					<div class="card h-100 shadow-sm border-0 product-card">
						<!-- Product Image -->
						<div class="product-img-container position-relative" style="height: 200px; overflow: hidden;">
							<img th:src="@{/images/{img} (img=${producto.imagen})}" th:alt="${producto.nombreproducto}"
								class="card-img-top rounded-top product-img"
								style="object-fit: cover; height: 100%; width: 100%; transition: transform 0.3s;">
						</div>

						<!-- Product Body -->
						<div class="card-body text-center d-flex flex-column">
							<h5 class="card-title fw-bold mb-3" th:text="${producto.nombreproducto}"
								style="font-size: 1.1rem; min-height: 3.5em; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
							</h5>

							<!-- Price Section -->
							<div class="mt-auto">
								<div class="mb-3">
									<span class="text-danger fw-bold fs-5"
										th:text="${#strings.concat('$', #numbers.formatDecimal(producto.precio, 0, 'POINT',0, 'POINT'))}"></span>
								</div>

								<!-- View Product Button -->
								<div class="card-footer bg-transparent border-0 text-center pt-0">
									<a th:href="@{/productoHome/{id} (id=${producto.id})}"
										class="btn btn-danger px-4 py-2 btn-view-product" style="transition: all 0.3s;">
										<i class="bi bi-eye me-2"></i> Ver Producto
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Pagination -->
			<div class="row mt-5" th:if="${totalPages > 1}">
				<div class="col-12">
					<nav aria-label="Page navigation">
						<ul class="pagination justify-content-center">
							<!-- First Page -->
							<li class="page-item" th:classappend="${currentPage == 1} ? 'disabled'">
								<a class="page-link" th:href="@{/productos(page=1)}" aria-label="First">
									<span aria-hidden="true">&laquo;&laquo;</span>
								</a>
							</li>

							<!-- Previous Page -->
							<li class="page-item" th:classappend="${currentPage == 1} ? 'disabled'">
								<a class="page-link" th:href="@{/productos(page=${currentPage-1})}"
									aria-label="Previous">
									<span aria-hidden="true">&laquo;</span>
								</a>
							</li>

							<!-- Page Numbers -->
							<li th:each="page : ${#numbers.sequence(1, totalPages)}" class="page-item"
								th:classappend="${page == currentPage} ? 'active'">
								<a class="page-link" th:href="@{/productos(page=${page})}" th:text="${page}"></a>
							</li>

							<!-- Next Page -->
							<li class="page-item" th:classappend="${currentPage == totalPages} ? 'disabled'">
								<a class="page-link" th:href="@{/productos(page=${currentPage+1})}" aria-label="Next">
									<span aria-hidden="true">&raquo;</span>
								</a>
							</li>

							<!-- Last Page -->
							<li class="page-item" th:classappend="${currentPage == totalPages} ? 'disabled'">
								<a class="page-link" th:href="@{/productos(page=${totalPages})}" aria-label="Last">
									<span aria-hidden="true">&raquo;&raquo;</span>
								</a>
							</li>
						</ul>
					</nav>
				</div>
			</div>
		</div>

	</main>

	<div th:insert="~{usuario/template_user.html::footer}"></div>
	<!-- Scroll Top -->
	<a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i
			class="bi bi-arrow-up-short"></i></a>

	<!-- Preloader -->
	<div id="preloader"></div>

	<div th:insert="~{usuario/template_user.html::jsFiles}">

	</div>

</body>

</html>